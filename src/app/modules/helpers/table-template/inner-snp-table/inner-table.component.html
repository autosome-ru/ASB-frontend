<div class="container inner-table">
    <table
        style="padding-left: 5px; padding-right: 5px; width: 100%"
        mat-table
        matSort
        [matSortDirection]="sortColumn ? 'desc' : ''"
        [matSortActive]="sortColumn == 'ref' ? 'rawPValueRef': 'rawPValueAlt'"
        #sort2="matSort"
        [dataSource]="_dataSource"
    >

        <ng-container
            *ngFor="let column of columnModel | keyvalue"
            [matColumnDef]="column.key"
        >
            <th mat-header-cell
                mat-sort-header
                [disabled]="column.value?.disabledSort"
                *matHeaderCellDef>{{column.value.view}}</th>
            <td mat-cell *matCellDef="let row">
                <ng-container
                    *ngIf="column.value?.columnTemplate; else valueConverterTemplate"
                    [ngTemplateOutlet]="column.value.columnTemplate"
                    [ngTemplateOutletContext]="{value: row[column.key], row: row}"
                ></ng-container>
                <ng-template #valueConverterTemplate>
                    {{column.value.valueConverter
                    ? column.value.valueConverter(row[column.key])
                    : row[column.key]}}
                </ng-template>
            </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="this.getDisplayedColumns(); sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: this.getDisplayedColumns();"
            class="asb-table__table-row"
        ></tr>
    </table>
</div>
<mat-paginator
   [pageSizeOptions]="_getPaginatorOptions()"
   showFirstLastButtons
   class="inner-table__paginator"
></mat-paginator>

<ng-template #alignTemplate let-value="value">
    <a
        *ngIf="value"
        target="_blank"
        rel="noopener noreferrer"
        [href]="'http://gtrd.biouml.org/'"
    >
        {{value}}
    </a>
</ng-template>
