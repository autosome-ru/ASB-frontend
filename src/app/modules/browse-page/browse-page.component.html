<div
    class="container"
    style="background: white"
>
    <h3
        style="padding-top: 10px"
    >
        Browse
    </h3>
    <mat-button-toggle-group
        #group="matButtonToggleGroup"
        style="margin-bottom: 10px"
        [value]="initialGroupValue"
        (change)="_groupToggled($event)"
    >
        <mat-button-toggle
            value="tf"
        >
            Transcription factors
        </mat-button-toggle>

        <mat-button-toggle
            value="cl"
        >
            Cell types
        </mat-button-toggle>
    </mat-button-toggle-group>
    <div
        style="margin-bottom: -16px"
    >
        <ng-container *ngIf="group.value === 'tf'; else clTableTemplate">
            <asb-table-server
                #tableTfView
                *ngIf="!(browseTfInfoLoading$ | async)"
                [data]="browseTfInfo$"
                [displayedColumns]="tfDisplayedColumns"
                [columnModel]="tfColumnModel"
                [paginatorOptions]="_getPaginatorOptions((browseTfInfo$ | async))"
                [clickableRow]="true"
                (rowClickEmitter)="_handleTableRowClick($event, 'tf')"
                (tableChangesEmitter)="_handleTableChange($event, 'tf')"
            >
            </asb-table-server>
        </ng-container>
    </div>
</div>

<ng-container *ngIf="(browseTfInfoLoading$ | async) || (browseClInfoLoading$ | async)">
    <div class="asb-browse__spinner">
        <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
    </div>
</ng-container>

<ng-template #uniprotViewTemplate let-value="value">
    <a
        (click)="$event.stopPropagation()"
        [href]="'https://www.uniprot.org/uniprot/' +  value"
        target="_blank"
        rel="noopener noreferrer"
    >
        {{value}}
    </a>
</ng-template>

<ng-template #cellTypeViewTemplate let-value="value" let-row="row">
    <a
        (click)="$event.stopPropagation()"
        [href]="'http://gtrd.biouml.org/'"
        target="_blank"
        rel="noopener noreferrer"
    >
        {{value}}
    </a>
</ng-template>

<ng-template #clTableTemplate>
    <asb-table-server
        #tableClView
        *ngIf="!(browseClInfoLoading$ | async)"
        [data]="browseClInfo$"
        [displayedColumns]="clDisplayedColumns"
        [columnModel]="clColumnModel"
        [paginatorOptions]="_getPaginatorOptions((browseClInfo$ | async))"
        [clickableRow]="true"
        (rowClickEmitter)="_handleTableRowClick($event, 'cl')"
        (tableChangesEmitter)="_handleTableChange($event, 'cl')"
    >
    </asb-table-server>
</ng-template>

